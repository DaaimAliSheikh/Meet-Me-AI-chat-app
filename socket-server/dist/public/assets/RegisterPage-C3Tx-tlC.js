import{r as t,u as N,a as P,j as s,B as p,b as E,L as C}from"./index-B0eaG1jq.js";import{C as A,a as v,L as I}from"./card-BYEDDkRr.js";import{A as R,E as U,S as L,a as f,F as M}from"./SuccessAlert-UJUsfGU8.js";import{z as l,u as z,F as k,a as m,b as c,c as i,d,I as x,e as u,t as B}from"./zod-DsN2C9OO.js";const G=l.object({username:l.string().min(3,{message:"Username must be at least 3 characters long"}).max(20,{message:"Username must be at most 20 characters long"}).regex(/^[a-zA-Z0-9_]+$/,{message:"Username can only contain letters, numbers, and underscores"}),email:l.string().email({message:"Invalid email address format"}),password:l.string().min(8,{message:"Password must be at least 8 characters long"}).max(32,{message:"Password must be at most 32 characters long"}).regex(/\d/,{message:"Password must contain at least one digit"}).regex(/[^a-zA-Z0-9]/,{message:"Password must contain at least one special character"}).regex(/^[\x00-\x7F]*$/,{message:"Password must only contain ASCII characters"})}),Z=()=>{const[g,n]=t.useState(null),[h,o]=t.useState(null),[w,_]=N(),e=z({shouldUnregister:!1,resolver:B(G),defaultValues:{username:"",email:"",password:""}});t.useEffect(()=>{w.get("credentials")==="true"&&(o(null),n("Email already registered with Email and Password credentials"))},[]);const b=t.useCallback(async a=>{var j;const{username:S,email:y,password:F}=a;try{const r=await P.post("/auth/register",{username:S,email:y,password:F});n(null),o(r.data.message)}catch(r){r instanceof R&&(o(null),n(((j=r.response)==null?void 0:j.data.message)||"Unable to register"))}},[]);return s.jsx(A,{children:s.jsxs(v,{className:"mt-4",children:[s.jsx(k,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(b),className:"space-y-2 flex flex-col",children:[s.jsx(m,{control:e.control,name:"username",render:({field:a})=>s.jsxs(c,{children:[s.jsx(i,{children:"Username"}),s.jsx(d,{children:s.jsx(x,{placeholder:"John Doe",...a})}),s.jsx(u,{})]})}),s.jsx(m,{control:e.control,name:"email",render:({field:a})=>s.jsxs(c,{children:[s.jsx(i,{children:"Email"}),s.jsx(d,{children:s.jsx(x,{placeholder:"xyz@example.com",...a})}),s.jsx(u,{})]})}),s.jsx(m,{control:e.control,name:"password",render:({field:a})=>s.jsxs(c,{children:[s.jsx(i,{children:"Password"}),s.jsx(d,{children:s.jsx(x,{type:"password",placeholder:"password",...a})}),s.jsx(u,{})]})}),g?s.jsx(U,{children:g}):null,h?s.jsx(L,{children:h}):null,s.jsxs(p,{disabled:e.formState.isSubmitting,className:" w-full text-foreground hover:bg-primary-foreground",type:"submit",children:["Register",e.formState.isSubmitting?s.jsx(I,{className:"animate-spin ml-2"}):null]}),s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx(f,{className:"w-[45%] mr-2"}),s.jsx("p",{className:"text-muted-foreground",children:"or"}),s.jsx(f,{className:"w-[45%] ml-2"})]})]})}),s.jsxs(p,{onClick:()=>window.location.href=E+"/api/auth/google",className:"w-full mt-2",variant:"secondary",children:[s.jsx(M,{className:" text-2xl mr-2 "}),s.jsx("p",{children:"Sign in with Google"})]})]})})},q=()=>s.jsxs("div",{className:"p-1 max-w-[35rem]   w-full  flex flex-col  mx-auto mt-6",children:[s.jsx("h2",{className:"text-xl p-1 py-2",children:"Register"}),s.jsx(Z,{}),s.jsx(C,{to:"/login",className:"text-sm text-muted-foreground text-center  underline my-4",children:"Already have an account? Sign In"})]});export{q as default};
